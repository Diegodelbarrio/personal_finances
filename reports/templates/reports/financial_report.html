{% extends "reports/_layout.html" %}

{% block report_content %}

<!-- KPI SUMMARY -->
<div class="row g-4 mb-4 row-cols-1 row-cols-md-2 row-cols-lg-4">
    {% include "reports/components/metric_card.html" with label="Total Income" value=report.annual_stats.income|floatformat:2|stringformat:"s €" color="success" %}

    {% include "reports/components/metric_card.html" with label="Total Expenses" value=report.annual_stats.expenses|floatformat:2|stringformat:"s €" color="danger" %}

    {% include "reports/components/metric_card.html" with label="Net Savings" value=report.annual_stats.savings|floatformat:2|stringformat:"s €" color="primary" %}

    {% include "reports/components/metric_card.html" with label="Savings Rate" value=report.annual_stats.avg_savings_rate|floatformat:1|add:" %" color="info" %}
</div>

<!-- FINANCE TABLE -->
{% include "reports/components/report_table.html" with hover=True table_template="reports/tables/finance_table.html" %}

<div class="row g-4 mt-2">
        <div class="col-12 col-lg-6">
            <div class="card card-rounded border-0 shadow-sm p-4 h-100 bg-white d-flex flex-column">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h5 class="fw-bold mb-0">Annual Savings Rule</h5>
                    <i class="bi bi-pie-chart text-muted"></i>
                </div>

                <div class="row align-items-center flex-grow-1">
                    <div class="col-sm-6">
                        <div style="position: relative; height: 250px;">
                            <canvas id="AnnualsavingsRuleChart"></canvas>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="legend-scroll-wrapper">
                            <div id="AnnualsavingsLegendContainer"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    <div class="col-12 col-lg-6">
        {% include "components/coming_soon_card.html" with title="Advanced Analytics" text="Coming Soon: AI-driven projections and dividend tracking." icon="bi-rocket-takeoff" %}
    </div>
</div>

<div class="row g-4 mt-1">
    <div class="col-12"> {% include "components/coming_soon_card.html" with title="Tax Estimation" text="Planned" icon="bi-receipt-cutoff" %}
    </div>
</div>

{{ report.annual_savings_rule_labels|json_script:"savings-labels" }}
{{ report.annual_savings_rule_data|json_script:"savings-data" }}

{% endblock %}


